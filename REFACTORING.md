# 리팩토링 기록

## 일자별 주요 변경 내용 기록
  - **모든 변경 내용은 이 Repo의 PR과 [README](README.md)의 배포 링크를 통해 확인 가능**
 ### 22/08/30
- 무한 스크롤 동작 기능 확인을 위해 외부 API를 적용하여 프로젝트 재구성
  - 무한 스크롤을 구현 할 서버 데이터가 없기 때문에 페이지네이션이 가능한 외부 API(lorem picsum) 활용
 ## 22/08/31
- 무한 스크롤 기능 개선
  - 각 아이템 클릭을 통해 상세 페이지 접근 후 뒤로가기 시 이전에 보던 스크롤 위치에서 다시 시작할 수 있도록 개선
  - JobItemList 컴포넌트에서 JobItem으로 page 정보를 props로 전달하고 상세 페이지로 라우팅 시 페이지 정보와 스크롤 위치를 세션 스토리지에 저장
  - 다시 원래 페이지로 돌아왔을 때 세션 스토리지의 정보를 통해 기존에 로딩했었던 데이터만큼 새로 불러오고 스크롤을 해당 위치로 이동시킴
  - useEffect의 cleanup 함수를 통해 unmount 발생 시 현재 페이지 정보를 저장하는 방식으로 구현하였으나 위와 같이 변경 (어느 방향이 나은 방향인지는 고민 필요)
  - 데이터가 렌더링 된 이후 스크롤을 이동시키기 위해 스크롤 이동 로직은 setTimeOut에 넣어 비동기 처리
  
  ![Aug-31-2022 22-50-35](https://user-images.githubusercontent.com/101119985/187695052-197b1c32-a2d6-4bf0-8af6-01f807e6ea80.gif)
  
 ## 22/09/01
- 구글 소셜 로그인 재구현
  - 백엔드를 fireBase로 대체하여 구글 소셜 로그인 구현
  - context API를 활용하여 로그인/로그아웃 함수 및 유저 상태 전역 관리
    - 관련 로직을 전역에서 관리함으로써 Login 컴포넌트와 Nav 컴포넌트의 로그인/로그아웃 관련 로직을 최소화 할 수 있게 됨
    - 개인정보를 나타내는 MypageAside 컴포넌트에 props없이 유저정보를 전달할 수 있게 됨
  - Protected 컴포넌트 적용을 통한 라우팅 보호
    - context를 통해 사용자 로그인을 확인하는 별도의 Protected 컴포넌트를 생성하여 아래와 같이 허가받지 않은 사용자의 경로 이동을 보호함
    - 보호 받는 컴포넌트에 대해 조금 더 직관적으로 나타낼 수 있는 방법이라고 생각 됨
    
![스크린샷 2022-09-01 오전 4 42 26](https://user-images.githubusercontent.com/101119985/187768133-76cc5577-c59e-4dfa-8995-f98d0f040cd8.png)

## 추가로 개선해야 될 부분
 - ~~무한스크롤 위치저장 기능 및 로딩 최적화~~ **[완료]**
 - ~~로그인 전역 상태 관리~~ **[완료]** 
 - 구글 소셜 로그인 배포 링크에서 작동 안되는 현상 개선
 - redux 활용한 추가 데이터 전역 관리
 - 아이템 리스트 필터 코드 리팩토링 (현재 가독성이 떨어짐)
 - 스크롤 저장기능은 잘 작동하지만 비교적 간단한 방식으로 구현하다보니 매번 데이터를 로딩해야되는 문제가 있음.
   - 매번 데이터 모든 데이터를 로딩하지 않고 필요한 위치의 데이터만 로딩 될 수 있도록 최적화가 필요 (react-virtualized 등 활용)
 -(추가)검색 기능 및 상세 페이지도 개선
 - 포탈기능을 통한 필터 팝업 재사용
